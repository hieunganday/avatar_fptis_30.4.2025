<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>H√≤a b√¨nh c·ªßa ch√∫ng m√¨nh - FPT IS</title>
  <style>
    body {
      text-align: center;
      font-family: Arial, sans-serif;
    }
    #canvas {
      border: 1px solid #ccc;
      margin-top: 20px;
      max-width: 90%;
    }
    #controls {
      margin: 20px 0;
    }
    #resultImageContainer img {
      margin-top: 20px;
      max-width: 90%;
      border: 2px solid #ccc;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <h1>H√≤a b√¨nh c·ªßa ch√∫ng m√¨nh - FPT IS</h1>
  
  <input type="file" id="upload" accept="image/*"><br><br>
  
  <div id="controls">
    <div>
      <label>Zoom ·∫£nh</label><br>
      <input type="range" id="scale" min="0.5" max="2" step="0.01" value="1">
    </div>
    <div>
      <label>Di chuy·ªÉn Tr√°i/Ph·∫£i</label><br>
      <input type="range" id="moveX" min="-200" max="200" step="1" value="0">
    </div>
    <div>
      <label>Di chuy·ªÉn L√™n/Xu·ªëng</label><br>
      <input type="range" id="moveY" min="-200" max="200" step="1" value="0">
    </div>
    <button id="download">·∫¢nh ƒë√£ xong - T·∫£i v·ªÅ</button>
  </div>

  <canvas id="canvas" width="800" height="800"></canvas>

  <div id="resultImageContainer"></div>

  <h3>·∫¢nh m·∫´u:</h3>
  <img src="m·∫´u.png" alt="·∫¢nh m·∫´u" style="width:200px; border: 1px solid #ccc;">

  <script>
    const upload = document.getElementById('upload');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const scaleInput = document.getElementById('scale');
    const moveXInput = document.getElementById('moveX');
    const moveYInput = document.getElementById('moveY');
    let uploadedImage = null;
    let frame = new Image();
    frame.src = 'frame.png'; // frame b·∫°n cung c·∫•p

    upload.addEventListener('change', function(e) {
      const reader = new FileReader();
      reader.onload = function(event) {
        uploadedImage = new Image();
        uploadedImage.onload = draw;
        uploadedImage.src = event.target.result;
      };
      reader.readAsDataURL(e.target.files[0]);
    });

    scaleInput.addEventListener('input', draw);
    moveXInput.addEventListener('input', draw);
    moveYInput.addEventListener('input', draw);

    function draw() {
      if (!uploadedImage) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const scale = parseFloat(scaleInput.value);
      const moveX = parseInt(moveXInput.value);
      const moveY = parseInt(moveYInput.value);

      const imgWidth = uploadedImage.width * scale;
      const imgHeight = uploadedImage.height * scale;

      ctx.drawImage(
        uploadedImage,
        canvas.width / 2 - imgWidth / 2 + moveX,
        canvas.height / 2 - imgHeight / 2 + moveY,
        imgWidth,
        imgHeight
      );

      ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);
    }

    document.getElementById('download').addEventListener('click', function() {
      const dataUrl = canvas.toDataURL('image/png');

      // Hi·ªÉn th·ªã ·∫£nh ra thay v√¨ t·∫£i th·∫≥ng
      const resultContainer = document.getElementById('resultImageContainer');
      resultContainer.innerHTML = '<p>üëâ Nh·∫•n gi·ªØ v√†o ·∫£nh b√™n d∆∞·ªõi v√† ch·ªçn "L∆∞u v√†o ·∫¢nh" ƒë·ªÉ l∆∞u!</p>';

      const img = new Image();
      img.src = dataUrl;
      resultContainer.appendChild(img);
    });
  </script>
</body>
</html>
